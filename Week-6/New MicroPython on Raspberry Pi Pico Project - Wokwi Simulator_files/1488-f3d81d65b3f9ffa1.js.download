(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1488],{88440:function(e,n,t){"use strict";t.d(n,{p:function(){return oe},r:function(){return re}});var r=t(47568),i=t(14924),o=t(20414),a=t(85893),l=t(19604),s=t(86010),c=t(68949),u=t(71217),d=t(67294),f=t(7914),h=t(49060),p=t(73983),m=t(26042),v=t(99534);var x=t(84104),g=t(41842),j=t(48734),y=t(44671),w=t.n(y),b=t(51438),Z=t(52951),k=t(86480),C=t.n(k),S=function(){function e(n,t){var r=this;(0,b.Z)(this,e),(0,i.Z)(this,"currentHintDecoration",void 0),(0,i.Z)(this,"debuggers",void 0),(0,i.Z)(this,"modelDecorations",void 0),(0,i.Z)(this,"monacoGlobal",void 0),(0,i.Z)(this,"editor",void 0),this.monacoGlobal=n,this.editor=t,this.currentHintDecoration=[],this.debuggers=new WeakMap,this.modelDecorations=new WeakMap,t.onMouseMove((function(e){var i=null,o=t.getModel(),a=n.editor.MouseTargetType;o&&r.debuggers.get(o)&&e.target.position&&(e.target.type===a.GUTTER_GLYPH_MARGIN||e.target.type===a.GUTTER_LINE_NUMBERS)&&(e.target.detail.isAfterLines||(i=e.target.position.lineNumber));r.setBreakpointHintDecoration(i)})),t.onMouseLeave((function(){r.setBreakpointHintDecoration(null)})),t.onMouseDown((function(e){var i=n.editor.MouseTargetType,o=t.getModel(),a=o?r.debuggers.get(o):null;if(e.target.position&&a&&e.target.type===i.GUTTER_GLYPH_MARGIN&&!e.target.detail.isAfterLines){var l=e.target.position.lineNumber;a.breakpoints.find((function(e){return e.lineNumber===l}))?a.removeBreakpoint(l):a.setBreakpoint(l)}}))}return(0,Z.Z)(e,[{key:"attachToModel",value:function(e,n){var t=this;this.debuggers.set(e,n);var r=(0,c.EH)((function(){t.updateBreakpointDecorations(e,n)}));e.onDidChangeAttached((function(){e.isAttachedToEditor()&&setTimeout((function(){return t.updateBreakpointDecorations(e,n)}),0)})),e.onWillDispose(r)}},{key:"supportsBreakpoints",value:function(e){return e.endsWith(".ino")||e.endsWith(".h")||e.endsWith(".c")||e.endsWith(".cpp")||e.endsWith(".rs")}},{key:"lineRange",value:function(e,n){var t=e.getLineFirstNonWhitespaceColumn(n);return e.validateRange(new this.monacoGlobal.Range(n,t,n,t+1))}},{key:"updateBreakpointDecorations",value:function(e,n){var t,r=this,i=this.monacoGlobal.editor.OverviewRulerLane,o=null!==(t=this.modelDecorations.get(e))&&void 0!==t?t:[],a=n.activeLine,l=n.breakpoints.map((function(n){var t=a===n.lineNumber;return{range:r.lineRange(e,n.lineNumber),options:{description:"breakpoint-decoration",isWholeLine:!0,glyphMarginClassName:t?(0,s.Z)("codicon-debug-stackframe",C().stackframe):(0,s.Z)("codicon-debug-breakpoint",C().breakpoint),glyphMarginHoverMessage:{value:"Breakpoint"},overviewRuler:{color:"#6a5aff",position:i.Left}}}}));a&&l.push({range:this.lineRange(e,a),options:{description:"debugger-frame-decoration",isWholeLine:!0,className:C().stackframeLine}}),this.modelDecorations.set(e,this.editor.deltaDecorations(o,l))}},{key:"setBreakpointHintDecoration",value:function(e){var n=this.monacoGlobal.editor.TrackedRangeStickiness;this.currentHintDecoration=this.editor.deltaDecorations(this.currentHintDecoration,e?[{range:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},options:{glyphMarginClassName:(0,s.Z)("codicon-debug-hint",C().hint),stickiness:n.NeverGrowsWhenTypingAtEdges}}]:[])}}]),e}(),_=t(39355),D=t(51797),M=t(46761),E=t(72428),N=t(23132),F=t(58703),T=t(46901),W=t(25464),P=t(18972),R=t(48885),z=t(59334),L=t(10625),B=t(68102),A=t(40622),H=t(11057),I=t(50657),G=t(31425),K=t(6514),U=t(37645),O=t(22237);function V(e){var n=e.open,t=e.validateName,r=e.onClose,i=e.onSubmit,o=(0,d.useState)(""),l=o[0],s=o[1],c=(0,d.useState)(null),u=c[0],f=c[1],h=function(){u||(l&&i(l),r())};return(0,a.jsx)(I.Z,{open:n,onClose:r,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,a.jsxs)("form",{onSubmit:function(e){h(),e.preventDefault()},children:[(0,a.jsx)(U.Z,{id:"form-dialog-title",children:"Create a new file"}),(0,a.jsx)(K.Z,{sx:{minHeight:"96px"},children:(0,a.jsx)(O.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:l,onChange:function(e){var n=e.target.value;s(n),f(n?t(n):null)},error:null!=u,helperText:u})}),(0,a.jsxs)(G.Z,{children:[(0,a.jsx)(H.Z,{onClick:r,children:"Cancel"}),(0,a.jsx)(H.Z,{onClick:h,color:"primary",variant:"contained",disabled:null!=u,children:"Create"})]})]})})}function q(e){var n=e.open,t=e.originalName,r=e.validateName,i=e.onClose,o=e.onRename,l=(0,d.useState)(t),s=l[0],c=l[1],u=(0,d.useState)(null),f=u[0],h=u[1];(0,d.useEffect)((function(){c(t)}),[t]);var p=function(){f||(s!==t&&o(s),i())};return(0,a.jsx)(I.Z,{open:n,onClose:i,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,a.jsxs)("form",{onSubmit:function(e){p(),e.preventDefault()},children:[(0,a.jsxs)(U.Z,{id:"form-dialog-title",children:['Rename "',t,'"']}),(0,a.jsx)(K.Z,{sx:{minHeight:"96px"},children:(0,a.jsx)(O.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:s,onChange:function(e){var n=e.target.value;c(n),h(n===t?null:r(n))},error:null!=f,helperText:f})}),(0,a.jsxs)(G.Z,{children:[(0,a.jsx)(H.Z,{onClick:i,children:"Cancel"}),(0,a.jsx)(H.Z,{onClick:p,color:"primary",variant:"contained",disabled:null!=f,children:"Rename"})]})]})})}var Y=["ino","txt","h","hh","hpp","c","csv","cpp","md","json","S","py","rs","bas","v"],$=["ino","h","hh","hpp","c","cpp"];function Q(e){var n=e.split(".");return $.includes(n[n.length-1])}function J(e){var n=e.activeFile,t=e.open,i=e.anchorEl,l=e.onClose,s=e.onFileCreated,c=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o='/<>:"\\|?*'[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(e.includes(a))return C("error.invalidFileName","Invalid filename: character {{char}} is not allowed.",{char:a})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e.includes(".")&&function(e){var n=e.split(".");return Y.includes(n[n.length-1])}(e)||"Cargo.toml"===e?u.files.some((function(n){return n.name===e}))?C("error.fileExists","A file with this name already exists"):null:C("error.invalidFileType","Invalid file type. Supported file types: {{types}}",{types:Y.join(", ")})},u=(0,A.P)(),f=(0,d.useContext)(re),h=(0,d.useState)(!1),p=h[0],m=h[1],v=(0,d.useState)(!1),x=v[0],g=v[1],j=(0,d.useState)(!1),y=j[0],w=j[1],b=(0,d.useState)(""),Z=b[0],k=b[1],C=(0,L.q)("editor.fileMenu").translate,S=function(){var e=(0,r.Z)((function(){var e,n,t,r,i,a,l,s,d,f,h,p,m,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,B.aE)({multiple:!0,accept:Y.map((function(e){return".".concat(e)}))})];case 1:e=o.sent().files,n=[],t=!0,r=!1,i=void 0,o.label=2;case 2:o.trys.push([2,8,9,10]),a=e[Symbol.iterator](),o.label=3;case 3:return(t=(l=a.next()).done)?[3,7]:(s=l.value,null!==(d=c(s.name))?[3,5]:(f=u.addFile,h=[s.name],m=(p=new TextDecoder).decode,[4,s.arrayBuffer()]));case 4:return f.apply(u,h.concat(m.apply(p,[o.sent()]))),[3,6];case 5:n.push("".concat(s.name,": ").concat(d)),o.label=6;case 6:return t=!0,[3,3];case 7:return[3,10];case 8:return v=o.sent(),r=!0,i=v,[3,10];case 9:try{t||null==a.return||a.return()}finally{if(r)throw i}return[7];case 10:return n.length&&alert(C("error.uploadFailed","Some files could not be uploaded")+"\n\n"+n.join("\n")),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{open:y,autoHideDuration:6e3,onClose:function(){w(!1)},children:(0,a.jsx)(T.Z,{severity:"success",children:Z})}),(0,a.jsxs)(W.Z,{open:t,onClose:l,onClick:l,anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[n&&Q(n)&&(0,a.jsxs)(P.Z,{onClick:(0,r.Z)((function(){var e,n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,null===(e=f.formatCode)||void 0===e?void 0:e.call(f)];case 1:return n=t.sent(),w(!0),k(n?C("formatSuccessful","Code formatted successfully"):C("formatAlready","Code already formatted")),[2]}}))})),children:[(0,a.jsx)(R.Z,{children:(0,a.jsx)(_.Z,{})}),(0,a.jsx)(z.Z,{primary:C("formatCode","Format code")})]}),n&&(0,a.jsxs)(P.Z,{onClick:function(){g(!0)},children:[(0,a.jsx)(R.Z,{children:(0,a.jsx)(D.Z,{fontSize:"small"})}),(0,a.jsx)(z.Z,{children:C("rename","Rename")})]}),n&&(0,a.jsxs)(P.Z,{onClick:function(){confirm(C("confirmDelete","This will remove {{filename}}. Should I go ahead?",{filename:null!==n&&void 0!==n?n:""}))&&n&&u.removeFile(n)},children:[(0,a.jsx)(R.Z,{children:(0,a.jsx)(M.Z,{fontSize:"small"})}),(0,a.jsx)(z.Z,{children:C("delete","Delete")})]}),(0,a.jsxs)(P.Z,{onClick:function(){m(!0)},children:[(0,a.jsx)(R.Z,{children:(0,a.jsx)(E.Z,{fontSize:"small"})}),(0,a.jsx)(z.Z,{children:C("newFile","New file...")})]}),(0,a.jsxs)(P.Z,{onClick:S,children:[(0,a.jsx)(R.Z,{children:(0,a.jsx)(N.Z,{fontSize:"small"})}),(0,a.jsx)(z.Z,{children:C("uploadFile","Upload file(s)...")})]})]}),(0,a.jsx)(V,{open:p,validateName:c,onClose:function(){return m(!1)},onSubmit:function(e){u.addFile(e),null===s||void 0===s||s(e)}}),(0,a.jsx)(q,{open:x,originalName:null!==n&&void 0!==n?n:"",validateName:c,onClose:function(){return g(!1)},onRename:function(e){n&&u.renameFile(n,e)}})]})}var X,ee=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","required":["version","author","editor","parts","connections"],"properties":{"version":{"enum":[1]},"author":{"type":"string","title":"Author name"},"editor":{"type":"string","title":"Software used to create this file","default":"wokwi","examples":["wokwi"]},"pacman":{"type":"boolean"},"parts":{"type":"array","title":"List of parts","items":{"required":["id","type"],"properties":{"id":{"type":"string"},"type":{"enum":["board-ssd1306","wokwi-74hc165","wokwi-74hc595","wokwi-analog-joystick","wokwi-arduino-nano","wokwi-arduino-mega","wokwi-arduino-uno","wokwi-attiny85","wokwi-buzzer","wokwi-il9163","wokwi-ili9341","wokwi-dht11","wokwi-dht12","wokwi-dht22","wokwi-ds1307","wokwi-franzininho","wokwi-hc-sr04","wokwi-ir-receiver","wokwi-ky-040","wokwi-lcd1602","wokwi-lcd2004","wokwi-led","wokwi-led-bar-graph","wokwi-led-ring","wokwi-logic-analyzer","wokwi-max7219-matrix","wokwi-membrane-keypad","wokwi-microsd-card","wokwi-midi-player","wokwi-mpu6050","wokwi-neopixel","wokwi-neopixel-matrix","wokwi-neopixel-meter","wokwi-neopixel-canvas","wokwi-ntc-temperature-sensor","wokwi-servo","wokwi-tv","wokwi-photoresistor-sensor","wokwi-pi-pico","wokwi-pir-motion-sensor","wokwi-potentiometer","wokwi-pushbutton","wokwi-rgb-led","wokwi-resistor","wokwi-7segment","wokwi-splendida","wokwi-slide-potentiometer","wokwi-slide-switch","wokwi-ssd1306"]},"left":{"type":"number"},"top":{"type":"number"},"rotate":{"type":"number"},"attrs":{"type":"object","additionalProperties":{"type":"string"}},"hide":{"type":"boolean","default":false}},"additionalProperties":false}},"connections":{"type":"array","title":"List of part connections","items":{"type":"array","minItems":3,"maxItems":4,"items":[{"type":"string","title":"From pin","pattern":"^.+:.+$"},{"type":"string","title":"To pin","pattern":"^.+:.+$"},{"type":"string","title":"Wire color","format":"color","examples":["black","red","green"]},{"type":"array","items":{"pattern":"^[vh]-?[0-9]+|\\\\*$","type":"string"}}],"additionalItems":false}},"serialMonitor":{"type":"object","properties":{"display":{"type":"string","enum":["always","never","auto","plotter","terminal"],"default":"auto"},"newline":{"type":"string","enum":["none","lf","cr","crlf"]}}}}}'),ne=t(73169);function te(){return X||(X=(0,r.Z)((function(){var e,n,r,i,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return ne.y||((e=document.createElement("link")).dataset.info="nextjs-head-issue-workaround",document.head.appendChild(e)),l._m.config({paths:{vs:"https://wokwi.com/cdn/monaco-editor/0.33.0/vs"}}),[4,l._m.init()];case 1:return n=o.sent(),[4,Promise.all([t.e(8639),t.e(8599)]).then(t.bind(t,8599))];case 2:return r=o.sent(),i=r.registerArduinoLanguage,a=r.registerAVRAssemblyLanguage,s=r.registerAVRListingLanguage,i(n),a(n),s(n),function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://wokwi.com/schemas/diagram-v1.json",fileMatch:["diagram.json"],schema:ee}]})}(n),[2,n]}}))}))()),X}var re=(0,d.createContext)({ready:!1,commands:{}});function ie(e,n){var t=(0,x.PE)(e)||e===g.rp?"arduino":"vs";return n?"".concat(t,"-dark"):t}var oe=(0,u.Pi)((function(e){var n=e.tabs,t=e.architecture,u=(0,d.useState)(n[0]),y=u[0],b=u[1],Z=!n.includes(y),k=Z?n[0]:y,C=(0,d.useRef)(k),_=(0,d.useState)(null),D=_[0],M=_[1],E=(0,d.useState)(null),N=E[0],F=E[1],T=(0,d.useState)(null),W=T[0],P=T[1],R=(0,d.useRef)(W),z=(0,d.useRef)(null),L=(0,d.useContext)(re),B=(0,d.useState)(!1),A=B[0],H=B[1],I=(0,d.useRef)(null),G=(0,d.useRef)(null),K=(0,d.useState)(!1),U=K[0],O=K[1],V=(0,h.A)(),q="1"===(0,f.Z)("wokwi-no-autocomplete"),Y=(0,d.useRef)(!1),$=(0,d.useCallback)((function(){var e=I.current;e&&(e.style.overflow="hidden",null===W||void 0===W||W.layout(),e.style.overflow="")}),[W]);L.doLayout=$,(0,p.m)("resize",$),L.goToError=function(){var e;if(!(null===(e=k.errors)||void 0===e?void 0:e.length)){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,s=o.value;if(null===(l=s.errors)||void 0===l?void 0:l.length)return void b(s)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}},(0,d.useEffect)((function(){return(0,c.EH)((function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,l=i.value;if(null===(a=l.debugger)||void 0===a?void 0:a.activeLine)return void b(l)}}catch(s){t=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}))}),[n]),L.formatCode=(0,r.Z)((function(){var e,n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return e=null===W||void 0===W?void 0:W.getValue(),[4,null===W||void 0===W?void 0:W.getAction("editor.action.formatDocument").run()];case 1:return t.sent(),n=null===W||void 0===W?void 0:W.getValue(),[2,e!==n]}}))})),(0,d.useEffect)((function(){Z&&b(n[0])}),[Z,n]);var Q,X=(0,d.useCallback)((function(e){var n,r,i=N.Uri.parse("vfs:"+e.name),o=null!==(r=N.editor.getModel(i))&&void 0!==r?r:N.editor.createModel(e.content,function(e,n){var t=e.name,r=e.content,i=t.toLowerCase();return t.endsWith(".chip.c")?"cpp":(0,x.PE)(t)?"arduino":i.endsWith(".json")?"json":i.endsWith(".md")?"markdown":n&&t.endsWith(".S")?"".concat(n,"-assembly"):t.endsWith(".py")?"python":t.endsWith(".rs")?"rust":t.endsWith(".bas")?"basic":t.endsWith(".js")?"javascript":t.endsWith(".ts")?"typescript":t.endsWith(".v")?"verilog":t===g.rp?r.includes("file format elf32-littlearm")?"arduino-listing-arm":"arduino-listing":"text"}(e,t),i);o.getValue()!==e.content&&o.setValue(e.content),o.onDidChangeContent((function(){var n;return null===(n=e.update)||void 0===n?void 0:n.call(e,o.getValue())}));var a=(0,c.EH)((function(){var n,t=R.current,r=(null===t||void 0===t?void 0:t.getModel())===o;N.editor.setModelMarkers(o,"Arduino",function(e,n){var t=function(n){switch(n){case"error":return e.MarkerSeverity.Error;case"warning":return e.MarkerSeverity.Warning;case"note":return e.MarkerSeverity.Hint}return e.MarkerSeverity.Error};return n.map((function(e){var n=e.type,r=(0,v.Z)(e,["type"]);return(0,m.Z)({severity:t(n)},r)}))}(N,e.errors||[]));var i=null===(n=e.errors)||void 0===n?void 0:n.filter((function(e){return"note"!==e.type}));r&&(null===i||void 0===i?void 0:i.length)&&setTimeout((function(){null===t||void 0===t||t.trigger(null,"closeMarkersNavigation",[]),null===t||void 0===t||t.getAction("editor.action.marker.next").run(),null===t||void 0===t||t.trigger(null,"closeMarkersNavigation",[])}),0)}));o.onWillDispose(a);var l,s=e.debugger;s&&(null===z||void 0===z||null===(n=z.current)||void 0===n?void 0:n.supportsBreakpoints(e.name))&&(null===(l=z.current)||void 0===l||l.attachToModel(o,s));return o}),[N,t]);return(0,d.useEffect)((function(){te().then(F)}),[]),(0,d.useEffect)((function(){var e=C.current;if(C.current=k,W&&N){var t,r;if(e&&n.includes(e))null===(r=e.setEditorState)||void 0===r||r.call(e,{model:W.getModel(),viewState:W.saveViewState()});var i=k.editorState;if(null===i||void 0===i?void 0:i.model){W.setModel(i.model);var o=W.getValue(),a=k.content;o!==a&&W.setValue(a)}else W.setModel(X(k));(null===i||void 0===i?void 0:i.viewState)&&W.restoreViewState(i.viewState),W.updateOptions({tabSize:k.name.endsWith(".py")?4:2,readOnly:k.readonly||k.name===g.rp}),(null===(t=k.debugger)||void 0===t?void 0:t.activeLine)&&W.revealLineInCenter(k.debugger.activeLine),Y.current||L.embedMode&&!document.hasFocus()||(setTimeout((function(){return W.focus()}),0),Y.current=!0)}}),[W,k,X,N,n,L.embedMode]),(0,d.useEffect)((function(){return(0,c.EH)((function(){if(W){var e=W.getModel();e&&k.content!==e.getValue()&&(W.pushUndoStop(),W.executeEdits("",[{range:e.getFullModelRange(),text:k.content}]),W.pushUndoStop())}}))}),[k,W]),(0,d.useEffect)((function(){if(null!=D){var e=n.find((function(e){return e.name===D}));e&&(null===W||void 0===W||W.focus(),b(e)),M(null)}}),[W,D,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j.mQ,{children:[n.map((function(e){var n;return(0,a.jsx)(j.OK,{onMouseDown:function(e){return e.preventDefault()},onClick:function(){return b(e)},active:e===k,readonly:e.readonly,modified:e.modified,errors:null===(n=e.errors)||void 0===n?void 0:n.some((function(e){return"error"===e.type})),children:e.name},e.name)})),(0,a.jsx)(j.BX,{onClick:function(){return H(!A)},active:A,ref:G})]}),U&&(0,a.jsxs)("div",{children:["Characters: ",k.content.length]}),(0,a.jsx)(J,{activeFile:k.name,open:A,onClose:function(){return H(!1)},onFileCreated:function(e){M(e)},anchorEl:G.current}),k.customComponent,(0,a.jsxs)("div",{className:(0,s.Z)(w().editorContainer,(Q={},(0,i.Z)(Q,w().disableAutocomplete,q),(0,i.Z)(Q,"dark",V.dark),Q)),style:{display:k.customComponent?"none":""},ref:I,children:[!N&&(0,a.jsx)("pre",{className:(0,s.Z)(w().sourceCodePreview,V.dark&&w().sourceCodePreviewDark),children:(0,a.jsx)("code",{children:k.content})}),N&&(0,a.jsx)(l.ZP,{onMount:function(e){if(P(e),R.current=e,e.updateOptions({tabSize:2}),N){var n;z.current=new S(N,e),L.ready=!0,null===(n=L.onEditorReady)||void 0===n||n.call(L),L.onRunCode&&e.addAction({id:"run-program",label:"Compile & Run Program",keybindings:[N.KeyMod.CtrlCmd|N.KeyCode.Enter,N.KeyMod.CtrlCmd|N.KeyCode.KeyU,N.KeyMod.CtrlCmd|N.KeyCode.KeyR],run:function(){var e;return null===(e=L.onRunCode)||void 0===e?void 0:e.call(L)}}),L.onSaveCode&&e.addAction({id:"save",label:"Save",keybindings:[N.KeyMod.CtrlCmd|N.KeyCode.KeyS],run:function(){var e;return null===(e=L.onSaveCode)||void 0===e?void 0:e.call(L)}});var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value,t=L.commands[n],r=t.name,i=t.keybindings;e.addAction({id:n,label:r,keybindings:null===i||void 0===i?void 0:i({KeyMod:N.KeyMod,KeyCode:N.KeyCode}),run:function(){return L.commands[n].callback()}})},l=Object.keys(L.commands)[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(s){r=!0,i=s}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}e.addAction({id:"character-counter",label:"Character Counter",run:function(){return O((function(e){return!e}))}}),e.setModel(X(k))}},wrapperProps:{className:w().wrapper},theme:ie(k.name,V.dark),options:{glyphMargin:!0,scrollBeyondLastLine:!L.embedMode,fontSize:V.font,minimap:{enabled:!1}}})]})]})}))},30521:function(e,n,t){"use strict";t.d(n,{y:function(){return s}});var r=t(26042),i=t(85893),o=t(99226),a=t(81458),l=t(15861);function s(e){var n,t=Math.round(null!==(n=e.value)&&void 0!==n?n:0);return(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(o.Z,{sx:{width:"100%",mr:1},children:(0,i.jsx)(a.Z,(0,r.Z)({variant:"determinate"},e))}),(0,i.jsx)(o.Z,{sx:{minWidth:35},children:(0,i.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"".concat(t,"%")})})]})}},61488:function(e,n,t){"use strict";t.d(n,{u:function(){return Mn}});var r=t(14924),i=t(85893),o=t(55317),a=t(8849),l=t.n(a),s=t(10389),c=t(59130),u=t(72428),d=t(41073),f=t(34685),h=t(89022),p=t(99226),m=t(34386),v=t(58032),x=t(14564),g=t(47036),j=t(13486),y=t(54128),w=t(20025),b=t(86010),Z=t(71217),k=t(5152),C=t.n(k),S=t(67294),_=t(88272),D=t(10625),M=t(49060),E=t(2889),N=t(78298),F=t(84104),T=t(88440),W=t(95654),P=t(904),R=t(4111),z=t(51438),L=t(52951),B=t(28668),A=t(26626),H=t(15861),I=t(11057),G=function(e){(0,B.Z)(t,e);var n=(0,A.Z)(t);function t(){var e;return(0,z.Z)(this,t),e=n.apply(this,arguments),(0,r.Z)((0,R.Z)(e),"state",{hasError:!1}),e}return(0,L.Z)(t,[{key:"render",value:function(){var e=this;return this.state.hasError?(0,i.jsxs)(p.Z,{px:1,pt:8,style:{background:"black",color:"white",height:"100%"},children:[(0,i.jsx)(H.Z,{variant:"h3",children:"Error in diagram.json"}),(0,i.jsx)("p",{children:"Please fix the error and click Retry:"}),(0,i.jsx)(I.Z,{onClick:function(){return e.setState({hasError:!1})},color:"secondary",children:"Retry"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),t}(S.Component),K=t(83624),U=t(10417),O=t(83680),V=t(12215),q=t(85591),Y=t(11296),$=t(88600),Q=t(40404),J=t(17575),X=t(65301),ee=t(84118),ne=t(18972),te=t(48885),re=t(59334),ie=t(67720),oe=t(80859),ae=t(39779),le=t(40622),se=t(19903),ce=(0,Z.Pi)((function(e){var n=e.onClose,t=(0,S.useContext)(P.A),r=(0,S.useContext)(se.D),o=(0,le.P)(),a=(0,S.useContext)(oe.St),l=t.fullScreen,s=(0,D.q)("diagram.menu").translate,c=o.diagram,u=c&&c.undoManager.canUndo,d=c&&c.undoManager.canRedo,f=(0,ae.p)(),h="avr"===o.architecture;return(0,i.jsxs)(ee.Z,{children:[(0,i.jsxs)(ne.Z,{disabled:!h,onClick:function(){r.start({debug:!0,diagram:o.diagram,files:o.files,chips:o.chips,binaryFiles:o.binaryFiles,sdCardFiles:o.sdCardFiles,projectId:o.id,userId:a.id}),n()},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(K.Z,{})}),(0,i.jsx)(re.Z,{children:s("debug","Debug (beta)")})]}),(0,i.jsx)(ie.Z,{}),(0,i.jsxs)(ne.Z,{disabled:!u,onClick:function(){null===c||void 0===c||c.undoManager.undo(),o.syncDiagram()},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(U.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:s("undo","Undo")}),(0,i.jsxs)(H.Z,{variant:"body2",color:"text.secondary",children:[f,"-Z"]})]}),(0,i.jsxs)(ne.Z,{disabled:!d,onClick:function(){null===c||void 0===c||c.undoManager.redo(),o.syncDiagram()},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(O.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:s("redo","Redo")}),(0,i.jsxs)(H.Z,{variant:"body2",color:"text.secondary",children:[f,"-Y"]})]}),(0,i.jsx)(ie.Z,{}),(0,i.jsxs)(ne.Z,{onClick:function(){return t.fit()},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(V.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:s("fit","Fit")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:"F"})]}),(0,i.jsxs)(ne.Z,{onClick:function(){return t.zoom(1.1)},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(q.Z,{})}),(0,i.jsx)(re.Z,{children:s("zoomIn","Zoom in")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:"+"})]}),(0,i.jsxs)(ne.Z,{onClick:function(){return t.zoom(.9)},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(Y.Z,{})}),(0,i.jsx)(re.Z,{children:s("zoomOut","Zoom out")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:"\u2013"})]}),(0,i.jsx)(ie.Z,{}),(0,i.jsxs)(ne.Z,{onClick:function(){return t.toggleGrid()},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)($.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:s("toggleGrid","Toggle Grid")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:"G"})]}),(0,i.jsxs)(ne.Z,{onClick:function(){return t.toggleFullScreen()},children:[(0,i.jsx)(te.Z,{children:l?(0,i.jsx)(Q.Z,{fontSize:"small"}):(0,i.jsx)(J.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:l?s("exitFullScreen","Exit full screen"):s("fullScreen","Full screen")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",sx:{marginLeft:2},children:"Alt-Enter"})]}),(0,i.jsxs)(ne.Z,{onClick:function(){return window.open("https://docs.wokwi.com/guides/diagram-editor")},children:[(0,i.jsx)(te.Z,{children:(0,i.jsx)(X.Z,{fontSize:"small"})}),(0,i.jsx)(re.Z,{children:s("help","Help")}),(0,i.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:"?"})]})]})})),ue=t(96506),de=t(42293),fe=t(79332),he=t(87109),pe=t(75438),me=t(18987),ve=t(69661),xe=t(26280),ge=t(63185),je=t(13731);function ye(){var e=(0,le.P)(),n=(0,S.useRef)(null),t=(0,S.useRef)(null),r=(0,S.useContext)(P.A),o=(0,S.useState)(""),a=o[0],l=o[1],s=(0,D.q)("diagram.addPart").translate,c=function(e){return e.variant?"".concat(e.type,"-").concat(e.variant):e.type},u="logic".startsWith(a.toLowerCase())&&a.length>0,d=je.s0.map((function(e){return"Logic"===e.title&&u?e:{title:e.title,items:e.items.filter((function(e){return s(c(e),e.label).toLowerCase().includes(a.toLowerCase())}))}})).filter((function(e){return e.items.length>0})),f=function(n){var t,i,o=r.diagramSafeVisibleArea,a=e.diagram;if(a&&o){for(var l={x:o.left+10,y:o.top+10};a.parts.find((function(e){return Math.abs(e.left-l.x)<2&&Math.abs(e.top-l.y)<2}));)l.x+=15,l.y+=15;var s=o&&(0,ge.MU)(o);t={x:Math.min(l.x,s.x),y:Math.min(l.y,s.y)}}a&&(a.addPartFromTemplate({type:n.type,prefix:n.prefix,attrs:null!==(i=n.attrs)&&void 0!==i?i:[]},t),e.syncDiagram())};return(0,i.jsxs)(p.Z,{minWidth:"350px",sx:{padding:2},children:[(0,i.jsx)(de.Z,{position:"sticky",onFocus:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.focus()},children:(0,i.jsx)(fe.Z,{autoFocus:!0,ref:n,value:a,onChange:function(e){return l(e.target.value)},onClick:function(e){return e.stopPropagation()},sx:{width:"100%"},onKeyDown:function(e){if("Enter"===e.key){var n,r=null===(n=d[0])||void 0===n?void 0:n.items[0];r&&(f(r),e.preventDefault())}else if("ArrowDown"===e.key||"ArrowUp"===e.key){var i;null===(i=t.current)||void 0===i||i.dispatchEvent(new KeyboardEvent(e.type,e)),e.preventDefault()}},endAdornment:(0,i.jsx)(he.Z,{position:"end",children:(0,i.jsx)(ue.Z,{})})})}),(0,i.jsx)(ee.Z,{ref:t,children:d.map((function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(pe.Z,{sx:{top:"27px"},children:s("category."+(0,xe.z)(e.title),e.title)}),e.items.map((function(e){return(0,i.jsxs)(ne.Z,{onClick:function(){return f(e)},children:[(0,i.jsx)(me.Z,{children:(0,i.jsx)(ve.Z,{alt:"Avatar ".concat(c(e)),src:e.photo,sx:{width:50,height:50},variant:"square"})}),(0,i.jsx)(re.Z,{primary:s(c(e),e.label)})]},c(e))}))]})}))})]})}var we=t(26042),be=t(51351),Ze=t(90948),ke=t(11703),Ce=t(40044),Se=t(78462),_e=t(70891);function De(){return(0,i.jsxs)(H.Z,{sx:{"text-align":"center",background:"#333",color:"white",py:.5},children:["The debugger is currently in ",(0,i.jsx)("strong",{children:"beta"}),". Please report any issues"," ",(0,i.jsx)("a",{href:"https://github.com/wokwi/wokwi-features/issues/205",target:"_blank",rel:"noreferrer",style:{color:"#aaf"},children:"here"}),"."]})}var Me=(0,Z.Pi)((function(){var e=function(e){if(!e)return"unknown file";if(e.includes(".arduino15/packages/arduino/hardware/avr")){var n=e.indexOf("/cores/arduino/");if(n>=0)return e.substring(n+1)}var t=e.split("/");return t[t.length-1]},n=(0,S.useContext)(se.D).debuggerStore;return(0,i.jsxs)(p.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(Se.Z,{dense:!0,sx:{overflow:"auto",flex:1},children:n.callstack.map((function(n,t){return(0,i.jsx)(_e.ZP,{children:(0,i.jsx)(re.Z,{primary:"#".concat(t," ").concat(n.function,"()"),secondary:"".concat(e(n.file),":").concat(n.line)})},t)}))}),(0,i.jsx)(De,{})]})})),Ee=(0,Z.Pi)((function(){var e=(0,S.useContext)(se.D).debuggerStore,n=e.locals.length>0,t=e.globals.length>0;return(0,i.jsxs)(p.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(Se.Z,{sx:{overflow:"auto","& ul":{padding:0}},subheader:(0,i.jsx)("li",{}),dense:!0,children:[n&&(0,i.jsx)(pe.Z,{children:"Locals"}),e.locals.map((function(e,n){return(0,i.jsx)(_e.ZP,{children:(0,i.jsx)(re.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},n)})),t&&(0,i.jsx)(pe.Z,{children:"Globals"}),e.globals.map((function(e,n){return(0,i.jsx)(_e.ZP,{children:(0,i.jsx)(re.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},n)})),!n&&!t&&(0,i.jsx)(pe.Z,{children:"No variables"})]}),(0,i.jsx)(De,{})]})})),Ne=t(13264),Fe=t(61193),Te=(0,Ne.Z)("div")((function(e){return{position:"relative",height:1,cursor:"row-resize",backgroundColor:"rgba(120, 120, 120, 0.3)","&:before":{display:"block",content:'" "',position:"absolute",top:-5,width:"100%",height:"10px"},"&:after":{display:"block",content:'" "',position:"absolute",backgroundColor:e.theme.palette.primary.light,top:-2,width:"100%",height:4,opacity:0},"&.dragging:after, &:hover:after":{opacity:1,transition:"opacity"}}}));function We(e){var n=e.children,t=e.initialSize,r=e.constrain,o=(0,S.useState)(!1),a=o[0],l=o[1],s=(0,S.useState)(t),c=s[0],u=s[1],d=r?r(c):c;return(0,i.jsxs)(p.Z,{display:"flex",flexDirection:"column",minHeight:d,flexBasis:d,children:[(0,i.jsx)(Fe.DraggableCore,{onStart:function(){return l(!0)},onDrag:function(e,n){u((function(e){return e-n.deltaY}))},onStop:function(){return l(!1)},children:(0,i.jsx)(Te,{className:a?"dragging":""})}),n]})}var Pe=t(82670),Re=t(61449),ze=t(29815),Le=t(99773),Be=t.n(Le),Ae=t(70453),He=t.n(Ae),Ie=[{strokeStyle:{g:255},lineWidth:4},{strokeStyle:{g:165,r:255},lineWidth:4},{strokeStyle:{r:255,b:255},lineWidth:4},{strokeStyle:{g:255,b:255},lineWidth:4},{strokeStyle:{g:255,r:255},lineWidth:4},{strokeStyle:{g:255,r:255,b:255},lineWidth:4}];function Ge(e){var n;return(0,we.Z)({data:new Le.TimeSeries({})},null!==(n=Ie[e])&&void 0!==n?n:{})}function Ke(e){if(e.includes(":")){var n=e.split(":"),t=parseFloat(n[1]);return{label:n[0],value:t}}var r=parseFloat(e);return isNaN(r)&&r?{label:e,value:r}:{value:r}}function Ue(e){var n=e.lines,t=(0,S.useState)([Ge(0)]),r=t[0],o=t[1],a=(0,S.useState)([]),l=a[0],s=a[1],c=(0,S.useState)(0),u=c[0],d=c[1],f=n.length;(0,S.useEffect)((function(){for(var e=function(e){var n=e.split(/[, \t]+/);if(n.length){var t=0,i=0,a=r,c=l,u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=Ke(h.value),v=m.label,x=m.value;!isNaN(x)&&t<16&&(a[t]||(a=(0,ze.Z)(a).concat([Ge(t)])),a[t].data.append((new Date).getTime(),x),t++),v&&((c=(0,ze.Z)(c))[i]=v,i++)}}catch(g){d=!0,f=g}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}a!==r&&o(a),c!==l&&s(c)}},t=f>=u?u:0;t<f;t++)e(n[t]);d(f)}),[u,n,r,f,l]);return(0,i.jsx)(Be(),{responsive:!0,nonRealtimeData:!0,tooltip:function(e){var n,t=e.display,r=e.time,o=e.data;return t?(0,i.jsxs)("div",{className:He().tooltip,children:[(0,i.jsx)("strong",{children:new Date(r||0).toLocaleTimeString()}),o?(0,i.jsx)("ul",{children:o.map((function(e,t){return(0,i.jsxs)("li",{style:{color:e.series.options.strokeStyle},children:[null!==(n=l[t])&&void 0!==n?n:1+t,": ",e.value]},t)}))}):(0,i.jsx)("div",{})]}):(0,i.jsx)("div",{})},containerStyle:{flex:1,position:"relative"},style:{height:"0",minHeight:"100%",width:"100%"},series:r})}var Oe=t(47568),Ve=t(20414),qe=t(8107),Ye=t.n(qe),$e=(0,S.forwardRef)((function(e,n){var r=e.onInput,o=e.onLoaded,a=e.style,l=e.className,s=(0,S.useState)(),c=s[0],u=s[1],d=(0,S.useRef)(null),f=(0,S.useRef)(),h=(0,S.useRef)(o);return h.current=o,(0,S.useImperativeHandle)(n,(function(){return{write:function(e){null===c||void 0===c||c.write(new Uint8Array([e]))},writeln:function(e){null===c||void 0===c||c.writeln(e)}}}),[c]),(0,S.useEffect)((function(){var e=d.current;e&&(0,Oe.Z)((function(){var n,r,i,o,a,l;return(0,Ve.__generator)(this,(function(s){switch(s.label){case 0:return[4,Promise.all([t.e(6142),t.e(2787)]).then(t.bind(t,82787))];case 1:return r=s.sent(),i=r.FitAddon,o=r.Terminal,(a=new o).open(e),l=new i,a.loadAddon(l),f.current=l,l.fit(),u(a),null===(n=h.current)||void 0===n||n.call(h,a),[2,function(){a.dispose(),u(void 0)}]}}))}))()}),[]),(0,S.useEffect)((function(){var e=null===c||void 0===c?void 0:c.onData((function(e){return null===r||void 0===r?void 0:r(e)}));return function(){return null===e||void 0===e?void 0:e.dispose()}}),[c,r]),Ye()({ref:d,onResize:function(e){var n;e.height&&(null===(n=f.current)||void 0===n||n.fit())}}),(0,i.jsx)("div",{ref:d,className:l,style:a})}));function Qe(e){var n=e.onInput,t=(0,S.useContext)(se.D),r=(0,S.useState)(null),o=r[0],a=r[1];return(0,S.useEffect)((function(){if(o){var e=function(){t.serial.bytesBuffer.length&&(o.write(new Uint8Array((0,ze.Z)(t.serial.bytesBuffer))),t.serial.bytesBuffer=[])};return e(),t.serial.listener=e,function(){t.serial.listener=void 0}}}),[o,t]),(0,i.jsx)($e,{style:{flex:1},onInput:n,onLoaded:function(e){a(e)}})}var Je=t(79946),Xe=t.n(Je);function en(e){var n=e.lines,t=e.buffer,a=e.onInput,s=e.onClear,c=e.plotter,u=e.onTogglePlotter,d=e.terminal,f=(0,S.useState)(!0),h=f[0],p=f[1],m=(0,S.useRef)(null),v=(0,S.useState)(function(){var e=(0,Re.N)().font;return e?{fontSize:e+"px"}:{}}())[0];(0,S.useEffect)((function(){h&&m.current&&(m.current.scrollTop=m.current.scrollHeight)}),[n.length,t,h]);var x=n.length,g=(0,S.useMemo)((function(){return n.join("\n")+(x?"\n":"")}),[n,x]);return d?(0,i.jsx)(Qe,{onInput:a}):(0,i.jsxs)("div",{className:Xe().serialMonitor,children:[c?(0,i.jsx)("div",{className:Xe().plotterContainer,children:(0,i.jsx)(Ue,{lines:n})}):(0,i.jsx)("div",{className:Xe().monitorContainer,children:(0,i.jsxs)("pre",{className:"notranslate",onScroll:function(e){var n=e.currentTarget,t=n.scrollHeight-n.scrollTop-n.clientHeight;t>32?p(!1):n.scrollTop>0&&t<1&&p(!0)},style:v,ref:m,children:[g,t]})}),(0,i.jsxs)("div",{className:Xe().serialControls,children:[(0,i.jsx)("input",{className:Xe().serialInput,onKeyPress:function(e){var n=e.target;"Enter"===e.key&&(0,Pe.Z)(n,HTMLInputElement)&&(null===a||void 0===a||a(n.value),n.value="")}}),(0,i.jsx)("button",{title:"Serial plotter",onClick:u,className:(0,b.Z)((0,r.Z)({},Xe().active,c)),children:(0,i.jsx)(l(),{path:o.Cst,size:1})}),(0,i.jsx)("button",{onClick:function(){return p(!h)},title:"Auto scroll",children:(0,i.jsx)(l(),{path:h?o.Wa1:o._86,size:1})}),(0,i.jsx)("button",{onClick:function(){return null===s||void 0===s?void 0:s()},children:(0,i.jsx)(l(),{path:o.QGK,size:1})})]})]})}var nn=(0,Ze.ZP)(ke.Z)({height:"32px",minHeight:"32px"}),tn=(0,Ze.ZP)(Ce.Z)((function(e){e=null!==e?e:(0,be.Z)(new TypeError("Cannot destructure undefined"));return{height:36,minHeight:36}}));function rn(e){var n=e.children,t=e.value,r=e.index;return(0,i.jsx)(p.Z,{id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),role:"tabpanel",sx:{flex:1,height:0,display:t==r?"flex":"none",flexDirection:"columnn"},children:n})}var on=(0,Z.Pi)((function(e){var n=e.diagram,t=(0,S.useState)(0),r=t[0],o=t[1],a=(0,S.useContext)(se.D),l=a.serial.terminalMode?function(e){return Math.max(1+17*Math.round(e/17),103)}:function(e){return Math.max(e,100)},s=a.serial.terminalMode?"":n.serialLineEnding,c=[];if(a.paused&&a.debugging&&(c.push({title:"Call Stack",content:(0,i.jsx)(Me,{})}),c.push({title:"Variables",content:(0,i.jsx)(Ee,{})})),a.serial.show&&c.push({title:"Serial Monitor",content:(0,i.jsx)(en,{lines:a.serial.lines,buffer:a.serial.textBuffer,plotter:a.serial.showPlotter,terminal:a.serial.terminalMode,onClear:function(){return a.serial.clearSerial()},onInput:function(e){return a.feedSerial(e+s)},onTogglePlotter:function(){return a.serial.togglePlotter()}})}),!c.length)return null;var u=Math.min(r,c.length-1);return(0,i.jsxs)(We,{initialSize:200,constrain:l,children:[c.length>1&&(0,i.jsx)(nn,{value:r,onChange:function(e,n){o(n)},"aria-label":"Bottom tabs",sx:{background:"black"},children:c.map((function(e,n){return(0,i.jsx)(tn,(0,we.Z)({label:e.title},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(n)),e.title)}))}),c.map((function(e,n){return(0,i.jsx)(rn,{value:u,index:n,children:e.content},e.title)}))]})})),an=t(50657),ln=t(31425),sn=t(6514),cn=t(37645),un=t(68949),dn=function(){function e(){(0,z.Z)(this,e),(0,r.Z)(this,"showBuildFailedDialog",!1),(0,r.Z)(this,"buildErrorMessage",""),(0,r.Z)(this,"showGetHelpDialog",!1),(0,un.ky)(this,{},{autoBind:!0})}return(0,L.Z)(e,[{key:"openBuildFailedDialog",value:function(e){this.showBuildFailedDialog=!0,this.buildErrorMessage=e}},{key:"closeBuildFailedDialog",value:function(){this.showBuildFailedDialog=!1}},{key:"openGetHelpDialog",value:function(){this.showGetHelpDialog=!0}},{key:"closeGetHelpDialog",value:function(){this.showGetHelpDialog=!1}}]),e}(),fn=(0,S.createContext)(new dn),hn=(0,Ne.Z)(cn.Z)((function(e){var n=e.theme;return{background:"linear-gradient(180deg, ".concat(n.palette.primary.dark,", transparent)")}})),pn=(0,Z.Pi)((function(){var e=(0,D.q)("simulator.buildFailedDialog").translate,n=(0,S.useContext)(fn),t=(0,S.useContext)(le.x),r=(0,S.useContext)(oe.St);return(0,i.jsxs)(an.Z,{open:n.showBuildFailedDialog,onClose:n.closeBuildFailedDialog,"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,i.jsx)(hn,{id:"form-dialog-title",children:e("title","Build failed!")}),(0,i.jsx)(sn.Z,{children:(0,i.jsx)("pre",{children:n.buildErrorMessage})}),(0,i.jsxs)(ln.Z,{children:[(0,i.jsx)(I.Z,{color:"secondary",variant:"contained",onClick:function(){(0,E.c)("getHelp:click",{project:null===t||void 0===t?void 0:t.id,owner:!(!(null===t||void 0===t?void 0:t.owner)||t.owner!==(null===r||void 0===r?void 0:r.id))}),n.closeBuildFailedDialog(),n.openGetHelpDialog()},children:"Get help"}),(0,i.jsx)(I.Z,{variant:"contained",onClick:n.closeBuildFailedDialog,children:"Close"})]})]})})),mn=t(78726),vn=t(62026),xn=t(90629),gn=t(88085),jn=(0,Z.Pi)((function(){var e=(0,S.useContext)(se.D),n=(0,S.useContext)(oe.St),t="provisioning"===n.machineId;return e.buildTime<1e3?null:(0,i.jsx)(p.Z,{position:"absolute",children:(0,i.jsxs)(xn.Z,{sx:{width:"max-content",maxWidth:"400px"},children:[(0,i.jsx)(p.Z,{color:{background:"#555",color:"white"},p:1,py:.5,children:(0,i.jsxs)(gn.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(H.Z,{sx:{flex:1},children:"Compiling project..."}),(0,i.jsxs)(H.Z,{color:"#ccc",children:[(0,i.jsx)(mn.Z,{sx:{verticalAlign:"top"}}),(e.buildTime/1e3).toFixed(2),"s"]}),(0,i.jsx)(I.Z,{onClick:function(){e.abortBuild(),(0,E.c)("build:cancel",{waitTime:e.buildTime})},color:"warning",children:"Cancel"})]})}),n.machineId&&!t?(0,i.jsx)(p.Z,{p:1,children:(0,i.jsxs)(H.Z,{children:[(0,i.jsx)(vn.Z,{color:"success",sx:{verticalAlign:"bottom"}})," Wokwi Private Build Server enabled"]})}):t?(0,i.jsxs)(p.Z,{p:1,children:[(0,i.jsx)(H.Z,{gutterBottom:!0,children:"Your Private Wokwi Build Server is being provisioned and will be ready in a few minutes."}),(0,i.jsxs)(H.Z,{gutterBottom:!0,children:["For support or questions, please contact us at"," ",(0,i.jsx)("a",{href:"mailto:support@wokwi.com?subject=Private Build Server",children:"support@wokwi.com"}),"."]})]}):(0,i.jsxs)(p.Z,{p:1,children:[(0,i.jsx)(H.Z,{gutterBottom:!0,children:"Enjoy faster compilation time and wait less with a Wokwi's Private Build Server."}),(0,i.jsx)(I.Z,{variant:"contained",href:"/private-build-server",target:"_blank",onClick:function(){(0,E.c)("privateServer:learnMore",{waitTime:e.buildTime})},children:"Learn more"})]})]})})})),yn=t(93946),wn=(0,Z.Pi)((function(){var e=(0,D.q)("simulator.getHelpDialog").translate,n=(0,S.useContext)(fn),t=(0,S.useContext)(oe.St),r=(0,S.useContext)(le.x),a=(0,S.useRef)(null),s=(null===r||void 0===r?void 0:r.owner)&&r.owner===(null===t||void 0===t?void 0:t.id),c=!(null===r||void 0===r?void 0:r.id),u=["**Project Link:** https://wokwi.com/projects/".concat(null===r||void 0===r?void 0:r.id,"?gh=1"),"","Error message: ".concat(n.buildErrorMessage)].join("\n");return(0,i.jsxs)(an.Z,{open:n.showGetHelpDialog,onClose:n.closeGetHelpDialog,"aria-labelledby":"form-dialog-title",maxWidth:"sm",children:[(0,i.jsx)(cn.Z,{id:"form-dialog-title",children:e("title","Get Help")}),(0,i.jsxs)(sn.Z,{children:[(0,i.jsxs)(H.Z,{gutterBottom:!0,children:["To get help, please join our"," ",(0,i.jsx)("a",{href:"https://wokwi.com/discord",target:"_blank",rel:"noopener noreferrer",children:"Discord Community Chat"}),", and ask for help in the ",(0,i.jsx)("b",{children:"#questions"})," channel."]}),c||!s&&r.modified?(0,i.jsxs)(H.Z,{gutterBottom:!0,children:["Important: make sure to ",(0,i.jsx)("b",{children:"save"})," the project first, and ",(0,i.jsx)("b",{children:"share the project link"})," ","along with your question."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(H.Z,{gutterBottom:!0,children:["Include the following information:",(0,i.jsx)(m.Z,{title:e("copyToClipboard","Copy to clipboard"),children:(0,i.jsx)(yn.Z,{onClick:function(e){var n;null===(n=a.current)||void 0===n||n.select(),document.execCommand("copy"),e.target.focus(),(0,E.c)("getHelp:copyToClipboard",{project:null===r||void 0===r?void 0:r.id})},sx:{verticalAlign:"sub"},children:(0,i.jsx)(l(),{path:o._U3,size:1})})})]}),(0,i.jsx)("textarea",{style:{width:"100%",background:"#ccc"},readOnly:!0,value:u,rows:8,ref:a,onClick:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.select()}}),r.modified&&(0,i.jsxs)(H.Z,{children:["Important: make sure to ",(0,i.jsx)("b",{children:"save"})," your project first!"]})]})]}),(0,i.jsx)(ln.Z,{children:(0,i.jsx)(I.Z,{variant:"contained",onClick:n.closeGetHelpDialog,children:"Close"})})]})})),bn=t(30521),Zn=(0,Z.Pi)((function(){var e=(0,D.q)("simulator.downloadingDataDialog").translate,n=(0,S.useContext)(se.D),t=(0,le.P)(),r=0,o=0,a=!0,l=!1,s=void 0;try{for(var c,u=t.sdCardFiles[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;r+=d.size,o=d.downloading?d.progress*d.size:d.size}}catch(h){l=!0,s=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}r||(r=1,o=1);var f=o/r*100;return(0,i.jsxs)(an.Z,{open:n.showSDCardDownload,onClose:function(){return n.skipSDCardDownload()},"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,i.jsx)(cn.Z,{id:"form-dialog-title",children:e("title","Downloading SD Card Data...")}),(0,i.jsx)(sn.Z,{children:(0,i.jsx)(bn.y,{value:f})}),(0,i.jsx)(ln.Z,{children:(0,i.jsx)(I.Z,{variant:"contained",onClick:function(){return n.skipSDCardDownload()},children:"Skip"})})]})})),kn=t(73983);function Cn(e){var n=e.src,t=(0,S.useContext)(se.D),r=(0,S.useState)(!1),o=r[0],a=r[1],l=(0,S.useRef)(null),s=(0,S.useState)(null),c=s[0],u=s[1];return(0,S.useEffect)((function(){return(0,un.EH)((function(){var e,n,r=t.lastUpdate;o&&Object.keys(r).length&&(null===(n=c||(null===(e=l.current)||void 0===e?void 0:e.contentWindow))||void 0===n||n.postMessage((0,we.Z)({$nanos:t.lastUpdateNanos},(0,un.ZN)(r)),"*"))}))})),(0,kn.m)("message",(function(e){var n,t=e.data;"wokwi"===(null===t||void 0===t?void 0:t.app)&&("listen"===t.command&&(a(!0),(null===(n=e.source)||void 0===n?void 0:n.postMessage)&&u(e.source)))})),(0,i.jsx)("iframe",{ref:l,src:n,style:{border:"none",flex:"1"},allow:"fullscreen; microphone; midi; usb; autoplay; camera; accelerometer"})}var Sn=t(20965),_n=t.n(Sn),Dn=C()((function(){return t.e(7303).then(t.bind(t,37303))}),{loadableGenerated:{webpack:function(){return[37303]}}}),Mn=(0,Z.Pi)((function(e){var n=e.diagram,t=e.files,a=e.className,Z=e.disableEdit,k=(0,S.useContext)(T.r),C=(0,S.useContext)(se.D),R=(0,S.useState)(!1),z=R[0],L=R[1],B=(0,S.useRef)(null),A=(0,S.useState)(!1),H=A[0],I=A[1],K=(0,S.useRef)(null),U=(0,le.P)(),O=(0,_.a)(),V=(0,M.A)(),q=(0,S.useContext)(P.A),Y=(0,S.useContext)(fn),$=(0,D.q)("simulator.main").translate,Q=(0,S.useCallback)((function(){return U.syncDiagram()}),[U]);C.onBuildFailure=function(e){var n,r,i,o=null!==(i=null===(n=t.find((function(e){return"sketch"===(0,F.r5)(e.name)})))||void 0===n?void 0:n.name)&&void 0!==i?i:"sketch.ino";(0,E.L)({category:"build",action:"build_failure"}),(0,E.c)("build:failure",{project:U.id,modified:U.modified}),null===(r=k.goToError)||void 0===r||r.call(k),Y.openBuildFailedDialog((0,N.GS)(e,o))};var J,X={background:g.Z[600],color:"white","&:hover":{background:g.Z[700]}},ee=C.running?$("restart","Restart the simulation"):$("start","Start the simulation"),ne=C.paused?$("resume","Resume"):$("pause","Pause");return(0,i.jsxs)("div",{className:(0,b.Z)(_n().container,(J={},(0,r.Z)(J,_n().darkMode,V.dark),(0,r.Z)(J,_n().fullscreen,q.fullScreen),J),a),onKeyDown:function(e){e.altKey&&"Enter"===e.key&&q.toggleFullScreen()},children:[(0,i.jsx)(Zn,{}),(0,i.jsx)(pn,{}),(0,i.jsx)(wn,{}),(0,i.jsxs)("div",{className:_n().simulationControls,children:[(0,i.jsx)(p.Z,{m:1,children:(0,i.jsx)(m.Z,{title:ee,children:(0,i.jsx)(v.Z,{onClick:function(){var e=C.running&&C.debugging;C.start({files:t,chips:U.chips,binaryFiles:U.binaryFiles,diagram:n,sdCardFiles:U.sdCardFiles,projectId:U.id,tempProjectId:U.tempId,userId:O.id,machineId:O.machineId,debug:e})},"aria-label":ee,size:"small",sx:{backgroundColor:j.Z[600],color:"white","&:hover":{backgroundColor:j.Z[700]}},children:C.running?(0,i.jsx)(s.Z,{}):(0,i.jsx)(c.Z,{})})})}),(0,i.jsxs)(p.Z,{my:1,mr:1,children:[!C.running&&!C.building&&!Z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{title:$("addNewPart","Add a new part"),children:(0,i.jsx)(v.Z,{ref:B,onClick:function(){return L((function(e){return!e}))},"aria-label":$("addNewPart","Add a new part"),size:"small",sx:{background:y.Z[400],color:"white","&:hover":{background:y.Z[500]}},children:(0,i.jsx)(u.Z,{})})}),(0,i.jsx)(x.ZP,{open:z,anchorEl:B.current,onClose:function(){return L(!1)},onClick:function(){return L(!1)},onKeyDown:function(e){"Enter"===e.key&&(L(!1),e.stopPropagation())},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(ye,{})})]}),C.building&&(0,i.jsx)(l(),{path:o.CEZ,size:.8,spin:!0}),C.building&&(0,i.jsx)(jn,{}),C.running&&(0,i.jsx)(m.Z,{title:$("stopSimulation","Stop the simulation"),children:(0,i.jsx)(v.Z,{onClick:function(){return C.stop()},"aria-label":$("stopSimulation","Stop the simulation"),sx:X,size:"small",children:(0,i.jsx)(d.Z,{})})})]}),!C.running&&!C.building&&!Z&&(0,i.jsxs)(p.Z,{my:1,mr:1,children:[(0,i.jsx)(m.Z,{title:$("zoomGridTooltip","Zoom, Grid, and more"),children:(0,i.jsx)(v.Z,{ref:K,onClick:function(){return I((function(e){return!e}))},"aria-label":$("zoomGridTooltip","Zoom, grid, and more"),sx:X,size:"small",children:(0,i.jsx)(f.Z,{})})}),(0,i.jsx)(x.ZP,{open:H,anchorEl:K.current,onClose:function(){return I(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(ce,{onClose:function(){return I(!1)}})})]}),C.running&&(0,i.jsx)(p.Z,{my:1,mr:1,children:(0,i.jsx)(m.Z,{title:ne,children:(0,i.jsx)(v.Z,{onClick:function(){C.paused?C.resume():C.pause()},"aria-label":ne,size:"small",sx:C.paused?{background:w.Z[500],color:"#333","&:hover":{background:w.Z[600]}}:X,children:C.paused?(0,i.jsx)(c.Z,{}):(0,i.jsx)(h.Z,{})})})})]}),C.running&&(0,i.jsxs)("span",{className:_n().simulationStatus,children:[(0,i.jsx)(l(),{path:o.clR,size:1}),(0,i.jsx)("span",{className:_n().timeText,ref:function(e){C.timeElement=e}}),(0,i.jsx)(l(),{path:o.YLv,size:1}),(0,i.jsx)("span",{className:_n().speedText,ref:function(e){C.speedElement=e}})]}),n.customView?(0,i.jsx)(Cn,{src:n.customView}):(0,i.jsx)(G,{children:(0,i.jsx)(W.Z,{diagram:n,editMode:!C.running&&!Z,onDiagramUpdated:Q,marginTop:56})}),(0,i.jsx)(on,{diagram:n}),n.ercEnabled&&!C.running&&(0,i.jsx)("div",{className:_n().ercBox,children:(0,i.jsx)("div",{children:(0,i.jsx)(Dn,{})})})]})}))},48734:function(e,n,t){"use strict";t.d(n,{BX:function(){return m},OK:function(){return v},mQ:function(){return x}});var r=t(14924),i=t(26042),o=t(69396),a=t(99534),l=t(85893),s=t(55317),c=t(8849),u=t.n(c),d=t(86010),f=t(67294),h=t(26586),p=t.n(h),m=(0,f.forwardRef)((function(e,n){var t=e.active,r=(0,a.Z)(e,["active"]);return(0,l.jsx)("button",(0,o.Z)((0,i.Z)({},r),{className:(0,d.Z)(p().dropdown,t&&p().active),ref:n,children:(0,l.jsx)(u(),{path:s.iW9,size:"20px"})}))}));function v(e){var n,t=e.children,s=e.active,c=e.modified,u=e.errors,f=e.readonly,h=(0,a.Z)(e,["children","active","modified","errors","readonly"]);return(0,l.jsx)("button",(0,o.Z)((0,i.Z)({},h),{className:(0,d.Z)(p().tab,(n={},(0,r.Z)(n,p().active,s),(0,r.Z)(n,p().modified,c),(0,r.Z)(n,p().errors,u),(0,r.Z)(n,p().readonly,f),n)),children:t}))}function x(e){var n=e.children;return(0,l.jsx)("div",{className:p().tabs,children:n})}m.displayName="DropdownTab"},73983:function(e,n,t){"use strict";t.d(n,{m:function(){return i}});var r=t(67294);function i(e,n){(0,r.useEffect)((function(){return window.addEventListener(e,n),function(){return window.removeEventListener(e,n)}}),[e,n])}},26280:function(e,n,t){"use strict";function r(e){return e.split(" ").map((function(e,n){return 0===n?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")}function i(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")}t.d(n,{L:function(){return i},z:function(){return r}})},44671:function(e){e.exports={wrapper:"code-editor_wrapper__AEiSo",sourceCodePreview:"code-editor_sourceCodePreview__EdZbN",dark:"code-editor_dark__CWET3",editorContainer:"code-editor_editorContainer__Rr_BW",disableAutocomplete:"code-editor_disableAutocomplete__YWoh3"}},86480:function(e){e.exports={breakpoint:"editor-breakpoints_breakpoint__fpIFO",stackframe:"editor-breakpoints_stackframe__RLFHW",hint:"editor-breakpoints_hint__6k0WP",stackframeLine:"editor-breakpoints_stackframeLine__izOAE"}},79946:function(e){e.exports={serialMonitor:"serial-monitor_serialMonitor__RdKZu",monitorContainer:"serial-monitor_monitorContainer__gCtjW",plotterContainer:"serial-monitor_plotterContainer__f7pEp",serialControls:"serial-monitor_serialControls__KSZx8",active:"serial-monitor_active__zff4A"}},70453:function(e){e.exports={tooltip:"serial-plotter_tooltip__DIqtJ"}},20965:function(e){e.exports={container:"simulation_container__dtl5x",darkMode:"simulation_darkMode__E_zZk",fullscreen:"simulation_fullscreen__ggcYt",simulationControls:"simulation_simulationControls__ludWG",timeText:"simulation_timeText__xmxMn",speedText:"simulation_speedText__lUUIl",simulationStatus:"simulation_simulationStatus__0E79Q",ercBox:"simulation_ercBox__DObiL"}},26586:function(e){e.exports={tabs:"tabs_tabs__ztOIk",tab:"tabs_tab__iRWK_",active:"tabs_active___gU2D",modified:"tabs_modified__tU9Lp",errors:"tabs_errors__OLBf0",readonly:"tabs_readonly__GBHlJ",dropdown:"tabs_dropdown__xOoyW"}}}]);